import{x as k,y as S,u as C,z as I,h as L}from"./index-c2b93ace.js";function O(t){return k()?(S(t),!0):!1}function w(t){return typeof t=="function"?t():C(t)}const A=typeof window<"u",E=()=>{},P=_();function _(){var t;return A&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function d(t){var s;const o=w(t);return(s=o==null?void 0:o.$el)!=null?s:o}const g=A?window:void 0;function v(...t){let s,o,r,c;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,r,c]=t,s=g):[s,o,r,c]=t,!s)return E;Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]);const a=[],p=()=>{a.forEach(i=>i()),a.length=0},l=(i,f,e,n)=>(i.addEventListener(f,e,n),()=>i.removeEventListener(f,e,n)),m=I(()=>[d(s),w(c)],([i,f])=>{p(),i&&a.push(...o.flatMap(e=>r.map(n=>l(i,e,n,f))))},{immediate:!0,flush:"post"}),h=()=>{m(),p()};return O(h),h}let y=!1;function W(t,s,o={}){const{window:r=g,ignore:c=[],capture:a=!0,detectIframe:p=!1}=o;if(!r)return;P&&!y&&(y=!0,Array.from(r.document.body.children).forEach(e=>e.addEventListener("click",E)));let l=!0;const m=e=>c.some(n=>{if(typeof n=="string")return Array.from(r.document.querySelectorAll(n)).some(u=>u===e.target||e.composedPath().includes(u));{const u=d(n);return u&&(e.target===u||e.composedPath().includes(u))}}),i=[v(r,"click",e=>{const n=d(t);if(!(!n||n===e.target||e.composedPath().includes(n))){if(e.detail===0&&(l=!m(e)),!l){l=!0;return}s(e)}},{passive:!0,capture:a}),v(r,"pointerdown",e=>{const n=d(t);n&&(l=!e.composedPath().includes(n)&&!m(e))},{passive:!0}),p&&v(r,"blur",e=>{var n;const u=d(t);((n=r.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(u!=null&&u.contains(r.document.activeElement))&&s(e)})].filter(Boolean);return()=>i.forEach(e=>e())}const x=(t,s)=>{const o=L(!1);return s?{isTouch:o,onClick:()=>{}}:(W(t,c=>{o.value=!1}),{isTouch:o,onClick:()=>{o.value=!0}})};export{x as u};
